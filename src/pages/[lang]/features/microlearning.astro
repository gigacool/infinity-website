---
import type { GetStaticPaths } from 'astro';
import Layout from "@/layouts/Layout.astro";
import FeaturePage from "@/components/FeaturePage.astro";
import { languages, getTranslations } from '@/i18n/utils';
import type { Language } from '@/i18n/utils';

export const prerender = true;

export const getStaticPaths = (() => {
  return languages.map((lang) => ({
    params: { lang },
  }));
}) satisfies GetStaticPaths;

const { lang } = Astro.params as { lang: Language };
const t = getTranslations(lang);

const benefits = [
  {
    icon: "bx:bxs-time-five",
    title: t.features_microlearning.benefit_1_title,
    description: t.features_microlearning.benefit_1_desc,
  },
  {
    icon: "bx:bxs-brain",
    title: t.features_microlearning.benefit_2_title,
    description: t.features_microlearning.benefit_2_desc,
  },
  {
    icon: "bx:bxs-phone",
    title: t.features_microlearning.benefit_3_title,
    description: t.features_microlearning.benefit_3_desc,
  },
  {
    icon: "bx:bxs-flame",
    title: t.features_microlearning.benefit_4_title,
    description: t.features_microlearning.benefit_4_desc,
  },
  {
    icon: "bx:bxs-bullseye",
    title: t.features_microlearning.benefit_5_title,
    description: t.features_microlearning.benefit_5_desc,
  },
];

const relatedFeatures = [
  {
    title: t.features.quizzes.title,
    description: t.features.quizzes.description,
    icon: "bx:bxs-bulb",
    href: `/${lang}/features/quizzes`,
  },
  {
    title: t.features.surveys.title,
    description: t.features.surveys.description,
    icon: "bx:bxs-bar-chart-alt-2",
    href: `/${lang}/features/surveys`,
  },
  {
    title: t.features.gamification.title,
    description: t.features.gamification.description,
    icon: "bx:bxs-trophy",
    href: `/${lang}/features/gamification`,
  },
];

const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": lang === 'fr' ? "Accueil" : "Home", "item": `https://infinity-website-psi.vercel.app/${lang}/` },
    { "@type": "ListItem", "position": 2, "name": t.features_page.title, "item": `https://infinity-website-psi.vercel.app/${lang}/features/` },
    { "@type": "ListItem", "position": 3, "name": t.features_microlearning.title }
  ]
};
---

<Layout lang={lang} title={t.features_microlearning.title} description={t.features_microlearning.meta_description}>
  <script slot="head" type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />
  <FeaturePage
    lang={lang}
    title={t.features_microlearning.title}
    description={t.features_microlearning.description}
    benefits={benefits}
    relatedFeatures={relatedFeatures}
  />
</Layout>
