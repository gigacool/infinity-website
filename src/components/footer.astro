---
import Container from "@/components/container.astro";
import LanguageToggle from "@/components/LanguageToggle.astro";
import { getTranslations, getCurrentLang } from "@/i18n/utils";
import type { Language } from "@/i18n/utils";

interface Props {
  lang?: Language;
}

const { lang: propLang } = Astro.props;
const lang = propLang || getCurrentLang(Astro.url);
const t = getTranslations(lang);
const currentPath = Astro.url.pathname;
---

<footer class="bg-infinity-light py-12 mt-20">
  <Container>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      <!-- Brand Column -->
      <div>
        <span class="font-bold text-xl text-infinity-dark">Infinity</span>
        <p class="text-sm text-gray-600 mt-2">{t.footer.tagline}</p>
      </div>

      <!-- Features Column -->
      <div>
        <h4 class="font-bold text-infinity-dark mb-4">{t.footer.features}</h4>
        <ul class="space-y-2 text-sm">
          <li>
            <a href={`/${lang}/features/quizzes`} class="text-gray-600 hover:text-infinity-orange transition-colors">
              {t.features.quizzes.title}
            </a>
          </li>
          <li>
            <a href={`/${lang}/features/surveys`} class="text-gray-600 hover:text-infinity-orange transition-colors">
              {t.features.surveys.title}
            </a>
          </li>
          <li>
            <a href={`/${lang}/features/microlearning`} class="text-gray-600 hover:text-infinity-orange transition-colors">
              {t.features.microlearning.title}
            </a>
          </li>
          <li>
            <a href={`/${lang}/features/gamification`} class="text-gray-600 hover:text-infinity-orange transition-colors">
              {t.features.gamification.title}
            </a>
          </li>
        </ul>
      </div>

      <!-- Company Column -->
      <div>
        <h4 class="font-bold text-infinity-dark mb-4">{t.footer.company}</h4>
        <ul class="space-y-2 text-sm">
          <li>
            <a href={`/${lang}/about`} class="text-gray-600 hover:text-infinity-orange transition-colors">
              {t.nav.about}
            </a>
          </li>
          <li>
            <a href={`/${lang}/blog`} class="text-gray-600 hover:text-infinity-orange transition-colors">
              {t.nav.blog}
            </a>
          </li>
          <li>
            <a href={`/${lang}/contact`} class="text-gray-600 hover:text-infinity-orange transition-colors">
              {t.nav.contact}
            </a>
          </li>
        </ul>
      </div>

      <!-- Legal Column -->
      <div>
        <h4 class="font-bold text-infinity-dark mb-4">{t.footer.legal}</h4>
        <ul class="space-y-2 text-sm">
          <li>
            <a href={`/${lang}/legal/privacy`} class="text-gray-600 hover:text-infinity-orange transition-colors">
              {t.legal.privacy}
            </a>
          </li>
          <li>
            <a href={`/${lang}/legal/terms`} class="text-gray-600 hover:text-infinity-orange transition-colors">
              {t.legal.terms}
            </a>
          </li>
        </ul>
        <div class="mt-4">
          <LanguageToggle currentLang={lang} currentPath={currentPath} />
        </div>
      </div>
    </div>

    <!-- Copyright -->
    <div class="mt-8 pt-8 border-t border-gray-200 text-center text-sm text-gray-600">
      Â© {new Date().getFullYear()} Infinity. {t.footer.rights}
    </div>
  </Container>
</footer>
